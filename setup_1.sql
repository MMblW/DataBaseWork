DROP DATABASE IF EXISTS DataBaseWork;
CREATE DATABASE IF NOT EXISTS DataBaseWork;

USE DataBaseWork;

CREATE TABLE IF NOT EXISTS Faculty
(
	faculty_name CHAR(50) PRIMARY KEY
);

CREATE TABLE IF NOT EXISTS Speciality
(
	speciality_name CHAR(50) PRIMARY KEY,
    faculty_name CHAR(50),
    number_of_groups INT,
    FOREIGN KEY (faculty_name) REFERENCES Faculty(faculty_name)
);

CREATE TABLE IF NOT EXISTS Study_Groups
(
	group_code CHAR(10) PRIMARY KEY,
    speciality_name CHAR(50),
    tutor_surname CHAR(50),
    FOREIGN KEY (speciality_name) REFERENCES Speciality(speciality_name)
);

CREATE TABLE IF NOT EXISTS Student
(
	gradebook_number CHAR(10) PRIMARY KEY,
    group_code CHAR(10),
    surname CHAR(50),
    student_name CHAR(50),
    patronymic CHAR(50),
    date_of_birth DATE,
    gender CHAR(1),
    has_scholarship BOOL,
    FOREIGN KEY (group_code) REFERENCES Study_Groups(group_code)
);

CREATE TABLE IF NOT EXISTS Discipline
(
	discipline_name CHAR(50) PRIMARY KEY,
    tutor_name CHAR(50)
);


CREATE TABLE IF NOT EXISTS Examination
(
	examination_id INT PRIMARY KEY AUTO_INCREMENT NOT NULL,
    gradebook_number CHAR(10),
    discipline_name CHAR(50),
    grade ENUM("незачёт", "зачёт", "неуд", "удовл", "хор", "отл"),
    number_of_reexamination INT,
    date_of_examination DATE,
    FOREIGN KEY (gradebook_number) REFERENCES Student(gradebook_number),
    FOREIGN KEY (discipline_name) REFERENCES Discipline(discipline_name)
);

CREATE TABLE IF NOT EXISTS Disciplines_on_faculties
(
	faculty_name CHAR(50),
    discipline_name CHAR(50),
    is_studied BOOL,
    FOREIGN KEY (faculty_name) REFERENCES Faculty(faculty_name),
    FOREIGN KEY (discipline_name) REFERENCES Discipline(discipline_name),
    PRIMARY KEY(faculty_name, discipline_name)
);

INSERT INTO Faculty
(faculty_name)
VALUES
("Электротехнический факультет"),
("Гуманитарный факультет");

INSERT INTO Speciality
(speciality_name, faculty_name, number_of_groups)
VALUES
("Разработка информационных систем", "Электротехнический факультет", 2),
("Информационные технологии и вычислительная техника", "Электротехнический факультет", 2),
("Экономика и логистика предприятия", "Гуманитарный факультет", 2),
("Связи с общественностью и реклама", "Гуманитарный факультет", 2);

INSERT INTO Study_Groups
(group_code, speciality_code, tutor_surname)
VALUES
("РИС-23", "Разработка информационных систем", "Иванов"),
("РИС-24", "Разработка информационных систем", "Петров"),
("ИВТ-23", "Информационные технологии и вычислительная техника", "Иванов"),
("ИВТ-24", "Информационные технологии и вычислительная техника", "Сидоров"),
("ЭЛП-23", "Экономика и логистика предприятия", "Козлов"),
("ЭЛП-24", "Экономика и логистика предприятия", "Козлов"),
("СОР-23", "Связи с общественностью и реклама", "Гусев"),
("СОР-24", "Связи с общественностью и реклама", "Гусев");

INSERT INTO Student
(gradebook_number, group_code, surname, student_name, patronymic, date_of_birth, gender, has_scholarship)
VALUES
("ЭТФ-23-1", "РИС-23", "Иванов", "Артём", "Леонидович", '2004-03-15', "М", false),
("ЭТФ-23-2", "РИС-23", "Смирнова", "Анна", "Владимировна", '2005-07-28', "Ж", false),
("ЭТФ-24-1", "РИС-24", "Козлов", "Дмитрий", "Сергеевич", '2006-11-03', "М", false),
("ЭТФ-24-2", "РИС-24", "Новикова", "Екатерина", "Игоревна", '2004-05-22', "Ж", false),
("ЭТФ-23-3", "ИВТ-23", "Фёдорова", "Ольга", "Александровна", '2005-12-09', "Ж", false),
("ЭТФ-23-4", "ИВТ-23", "Соколов", "Павел", "Викторович", '2006-08-14', "М", false),
("ЭТФ-24-3", "ИВТ-24", "Михайлова", "Татьяна", "Денисовна", '2004-01-30', "Ж", false),
("ЭТФ-24-4", "ИВТ-24", "Петров", "Максим", "Олегович", '2005-06-17', "М", false),
("ГУМ-23-1", "ЭЛП-23", "Лебедев", "Иван", "Алексеевич", '2006-09-05', "М", false),
("ГУМ-23-2", "ЭЛП-23", "Кузнецова", "Марина", "Станиславовна", '2004-02-24', "Ж", false),
("ГУМ-24-1", "ЭЛП-24", "Морозов", "Андрей", "Геннадьевич", '2005-04-11', "М", false),
("ГУМ-24-2", "ЭЛП-24", "Павлова", "Юлия", "Романовна", '2006-10-08', "Ж", false),
("ГУМ-23-3", "СОР-23", "Волков", "Кирилл", "Ильич", '2004-07-19', "М", false),
("ГУМ-23-4", "СОР-23", "Алексеева", "Надежда", "Васильева", '2005-03-02', "Ж", false),
("ГУМ-24-3", "СОР-24", "Никитин", "Григорий", "Петрович", '2006-12-26', "М", false),
("ГУМ-24-4", "СОР-24", "Орлова", "Людмила", "Юрьевна", '2004-05-31', "Ж", false);


INSERT INTO Discipline
(discipline_name, tutor_name)
VALUES
("Психология", "A"),
("Математика", "B"),
("Программирование", "C");

INSERT INTO Examination
(gradebook_number, discipline_name, grade, number_of_reexamination, date_of_examination)
VALUES
("ЭТФ-23-1", "Математика", "удовл", 0, '2025-01-20'),
("ЭТФ-23-1", "Программирование", "хор", 0, '2025-01-14'),
("ЭТФ-23-2", "Математика", "удовл", 0, '2025-01-03'),
("ЭТФ-23-2", "Программирование", "хор", 0, '2025-01-12'),
("ЭТФ-24-1", "Математика", "удовл", 0, '2025-01-18'),
("ЭТФ-24-1", "Программирование", "неуд", 0, '2025-01-25'),
("ЭТФ-24-1", "Программирование", "неуд", 1, '2025-01-28'),
("ЭТФ-24-1", "Программирование", "отл", 2, '2025-01-30'),
("ЭТФ-24-2", "Математика", "неуд", 0, '2025-05-07'),
("ЭТФ-24-2", "Математика", "удовл", 1, '2025-05-11'),
("ЭТФ-24-2", "Программирование", "хор", 0, '2025-05-15'),
("ЭТФ-23-3", "Математика", "хор", 0, '2025-05-21'),
("ЭТФ-23-3", "Программирование", "неуд", 0, '2025-05-29'),
("ЭТФ-23-3", "Программирование", "неуд", 1, '2025-06-01'),
("ЭТФ-23-3", "Программирование", "отл", 2, '2025-06-05'),
("ЭТФ-23-4", "Математика", "хор", 0, '2025-01-05'),
("ЭТФ-23-4", "Программирование", "удовл", 0, '2025-01-14'),
("ЭТФ-24-3", "Математика", "удовл", 0, '2025-01-22'),
("ЭТФ-24-3", "Программирование", "отл", 0, '2025-01-30'),
("ЭТФ-24-4", "Математика", "отл", 0, '2025-05-02'),
("ЭТФ-24-4", "Программирование", "неуд", 0, '2025-05-10'),
("ЭТФ-24-4", "Программирование", "отл", 1, '2025-05-15'),
("ГУМ-23-1", "Математика", "удовл", 0, '2025-01-04'),
("ГУМ-23-1", "Психология", "хор", 0, '2025-01-11'),
("ГУМ-23-2", "Математика", "отл", 0, '2025-01-19'),
("ГУМ-23-2", "Психология", "отл", 0, '2025-01-27'),
("ГУМ-24-1", "Математика", "удовл", 0, '2025-05-06'),
("ГУМ-24-1", "Психология", "отл", 0, '2025-05-13'),
("ГУМ-24-2", "Математика", "удовл", 0, '2025-05-09'),
("ГУМ-24-2", "Психология", "неуд", 0, '2025-05-24'),
("ГУМ-24-2", "Психология", "удовл", 1, '2025-05-30'),
("ГУМ-23-3", "Математика", "хор", 0, '2025-05-20'),
("ГУМ-23-3", "Психология", "хор", 0, '2025-05-28'),
("ГУМ-23-4", "Математика", "неуд", 0, '2025-05-01'),
("ГУМ-23-4", "Математика", "отл", 1, '2025-05-08'),
("ГУМ-24-3", "Математика", "хор", 0, '2025-05-14'),
("ГУМ-24-3", "Психология", "неуд", 0, '2025-01-16'),
("ГУМ-24-3", "Психология", "неуд", 1, '2025-01-19'),
("ГУМ-24-3", "Психология", "хор", 2, '2025-01-25'),
("ГУМ-24-4", "Математика", "удовл", 0, '2025-01-23'),
("ГУМ-24-4", "Психология", "удовл", 0, '2025-01-31');



INSERT INTO Disciplines_on_faculties
(faculty_name, discipline_name, is_studied)
VALUES
("Электротехнический факультет", "Психология", false),
("Электротехнический факультет", "Математика", true),
("Электротехнический факультет", "Программирование", true),
("Гуманитарный факультет", "Психология", true),
("Гуманитарный факультет", "Математика", true),
("Гуманитарный факультет", "Программирование", false);